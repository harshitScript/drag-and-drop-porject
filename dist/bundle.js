(()=>{"use strict";function t(t,e,n){var r=n.value;return{configurable:!0,get:function(){return r.bind(this)}}}var e;!function(t){t[t.ACTIVE=0]="ACTIVE",t[t.FINISHED=1]="FINISHED"}(e||(e={}));var n,r=function(t,e,n,r,o){this.id=t,this.title=e,this.description=n,this.people=r,this.status=o},o=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=function(t){function n(){var e=t.call(this)||this;return e.projects=[],e}return o(n,t),n.getInstance=function(){return this.instance||(this.instance=new n),this.instance},n.prototype.addProject=function(t,n,o){var i=new r(Math.random().toString(),t,n,o,e.ACTIVE);this.projects.push(i),this.updateListeners()},n.prototype.moveProject=function(t,e){var n=this.projects.find((function(e){return e.id===t}));n&&n.status!==e&&(n.status=e,this.updateListeners())},n.prototype.updateListeners=function(){for(var t=0,e=this.listeners;t<e.length;t++)(0,e[t])(this.projects.slice())},n}(function(){function t(){this.listeners=[]}return t.prototype.addListener=function(t){this.listeners.push(t)},t}()).getInstance();function l(t){var e=!0;return t.required&&(e=e&&0!==t.value.toString().trim().length),null!=t.maxLength&&(e=e&&t.value.toString().length<=t.maxLength),null!=t.minLength&&(e=e&&t.value.toString().length>=t.minLength),null!=t.max&&(e=e&&"number"==typeof t.value&&t.value<=t.max),null!=t.min&&(e=e&&"number"==typeof t.value&&t.value>=t.min),e}const a=function(){function t(t,e,n,r){this.templateElement=document.getElementById(t),this.hostElement=document.getElementById(e);var o=document.importNode(this.templateElement.content,!0);this.element=o.firstElementChild,r&&(this.element.id=r),this.attach(n)}return t.prototype.attach=function(t){this.hostElement.insertAdjacentElement(t?"afterbegin":"beforeend",this.element)},t}();var c=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(e){function n(){var t=e.call(this,"project-input","app",!0)||this;return t.titleInputElement=t.element.querySelector("#title"),t.descriptionInputElement=t.element.querySelector("#description"),t.peopleInputElement=t.element.querySelector("#people"),t.configure(),t}return c(n,e),n.prototype.configure=function(){this.element.addEventListener("submit",this.submitHandler)},n.prototype.renderContent=function(){},n.prototype.submitHandler=function(t){t.preventDefault();var e=this.gatherUserInput();if(Array.isArray(e)){var n=e[0],r=e[1],o=e[2];i.addProject(n,r,o),this.clearInputs()}},n.prototype.gatherUserInput=function(){var t=this.titleInputElement.value,e=this.descriptionInputElement.value,n=this.peopleInputElement.value,r={value:e,required:!0,minLength:10,maxLength:50},o={value:+n,required:!0,min:1,max:10};if(l({value:t,required:!0,minLength:1,maxLength:15})&&l(r)&&l(o))return[t,e,+n];alert("Invalid input, please try again!")},n.prototype.clearInputs=function(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""},function(t,e,n,r){var o,i=arguments.length,l=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(l=(i<3?o(l):i>3?o(e,n,l):o(e,n))||l);i>3&&l&&Object.defineProperty(e,n,l)}([t],n.prototype,"submitHandler",null),n}(a),u=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(t,e,n,r){var o,i=arguments.length,l=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(l=(i<3?o(l):i>3?o(e,n,l):o(e,n))||l);return i>3&&l&&Object.defineProperty(e,n,l),l},f=function(e){function n(t,n){var r=e.call(this,"single-project",t,!1,n.id)||this;return r.project=n,r.configure(),r.renderContent(),r}return u(n,e),Object.defineProperty(n.prototype,"peopleAssignedText",{get:function(){return this.project.people>1?"".concat(this.project.people," persons assigned"):"1 person assigned"},enumerable:!1,configurable:!0}),n.prototype.dragStartHandler=function(t){t.dataTransfer.setData("text/plain",this.project.id),t.dataTransfer.effectAllowed="move"},n.prototype.dragEndHandler=function(t){console.log("The drag ended!")},n.prototype.configure=function(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)},n.prototype.renderContent=function(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.peopleAssignedText,this.element.querySelector("p").textContent=this.project.description},p([t],n.prototype,"dragStartHandler",null),p([t],n.prototype,"dragEndHandler",null),n}(a),d=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(t,e,n,r){var o,i=arguments.length,l=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(l=(i<3?o(l):i>3?o(e,n,l):o(e,n))||l);return i>3&&l&&Object.defineProperty(e,n,l),l},y=function(n){function r(t){var e=n.call(this,"project-list","app",!1,"".concat(t,"-projects"))||this;return e.type=t,e.assignedProjects=[],e.configure(),e.renderContent(),e}return d(r,n),r.prototype.configure=function(){var t=this;this.element.querySelector("ul").addEventListener("dragover",this.dragOverHandler),this.element.querySelector("ul").addEventListener("drop",this.dropHandler),this.element.querySelector("ul").addEventListener("dragleave",this.dragLeaveHandler),i.addListener((function(n){var r=n.filter((function(n){return"active"===t.type?n.status===e.ACTIVE:n.status===e.FINISHED}));t.assignedProjects=r,t.renderProjects()}))},r.prototype.dragOverHandler=function(t){t.dataTransfer&&"text/plain"===t.dataTransfer.types[0]&&(t.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))},r.prototype.dropHandler=function(t){i.moveProject(t.dataTransfer.getData("text/plain"),"active"===this.type?e.ACTIVE:e.FINISHED)},r.prototype.dragLeaveHandler=function(t){this.element.querySelector("ul").classList.remove("droppable")},r.prototype.renderContent=function(){var t="".concat(this.type,"-projects-list");this.element.querySelector("ul").id=t,this.element.querySelector("h2").textContent="".concat(this.type.toUpperCase()," PROJECTS")},r.prototype.renderProjects=function(){var t=document.getElementById("".concat(this.type,"-projects-list"));t.innerHTML="";for(var e=0,n=this.assignedProjects;e<n.length;e++){var r=n[e];new f(t.id,r)}},h([t],r.prototype,"dragOverHandler",null),h([t],r.prototype,"dropHandler",null),h([t],r.prototype,"dragLeaveHandler",null),r}(a);new s,new y("active"),new y("finished")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUttRCxRQUFRSyxjQUFjLE1BQU90RCxHQUFLb0csRUFDdkN0RyxLQUFLbUQsUUFBUUssY0FBYyxNQUFPNkIsWUFBYyxVQUFHckYsS0FBS3VGLEtBQUtnQixjQUFhLFlBQzlFLEVBRVEsWUFBQVAsZUFBUixXQUNJLElBQU1RLEVBQVMzRCxTQUFTQyxlQUFlLFVBQUc5QyxLQUFLdUYsS0FBSSxtQkFDbkRpQixFQUFPQyxVQUFZLEdBQ25CLElBQXNCLFVBQUF6RyxLQUFLd0YsaUJBQUwsZUFBdUIsQ0FBeEMsSUFBTWtCLEVBQU8sS0FDZCxJQUFJQyxFQUFZSCxFQUFPdEcsR0FBSXdHLEVBQy9CLENBQ0osRUE5QkEsR0FEQ25ILEcsb0NBVUQsR0FEQ0EsRyxnQ0FNRCxHQURDQSxHLHFDQWtCTCxDLENBMURBLENBQWlDLEdDTGpDLElBQUlxSCxFQUNKLElBQUlDLEVBQVksVUFDaEIsSUFBSUEsRUFBWSxXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZHJhZy1hbmQtZHJvcC1wcm9qZWN0Ly4vc3JjL2RlY29yYXRvcnMvYXV0b2JpbmQudHMiLCJ3ZWJwYWNrOi8vZHJhZy1hbmQtZHJvcC1wcm9qZWN0Ly4vc3JjL01vZGVsL3Byb2plY3QudHMiLCJ3ZWJwYWNrOi8vZHJhZy1hbmQtZHJvcC1wcm9qZWN0Ly4vc3JjL3N0YXRlL3Byb2plY3Qtc3RhdGUudHMiLCJ3ZWJwYWNrOi8vZHJhZy1hbmQtZHJvcC1wcm9qZWN0Ly4vc3JjL3V0aWxzL3ZhbGlkYXRpb24udHMiLCJ3ZWJwYWNrOi8vZHJhZy1hbmQtZHJvcC1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvYmFzZS1jb21wb25lbnQudHMiLCJ3ZWJwYWNrOi8vZHJhZy1hbmQtZHJvcC1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1pbnB1dC50cyIsIndlYnBhY2s6Ly9kcmFnLWFuZC1kcm9wLXByb2plY3QvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0LWl0ZW0udHMiLCJ3ZWJwYWNrOi8vZHJhZy1hbmQtZHJvcC1wcm9qZWN0Ly4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1saXN0LnRzIiwid2VicGFjazovL2RyYWctYW5kLWRyb3AtcHJvamVjdC8uL3NyYy9hcHAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8vIEF1dG9CaW5kIERlY29yYXRvclxyXG5leHBvcnQgZnVuY3Rpb24gQXV0b0JpbmQoXzogYW55LCBfMjogc3RyaW5nLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpOiBQcm9wZXJ0eURlc2NyaXB0b3Ige1xyXG4gICAgY29uc3Qgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlO1xyXG4gICAgY29uc3QgYWRqRGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yID0ge1xyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvdW5kRm4gPSBvcmlnaW5hbE1ldGhvZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gYm91bmRGbjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGFkakRlc2NyaXB0b3I7XHJcbn0iLCJleHBvcnQgZW51bSBQcm9qZWN0U3RhdHVzIHsgQUNUSVZFLCBGSU5JU0hFRCB9IC8vIGdlbmVyYWwgY29udmVudGlvbiBvZiBlbnVtIHRvIHVzZSBjYXBpdGFsIGxldHRlcnNcclxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHVibGljIGlkOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIHRpdGxlOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcbiAgICAgICAgcHVibGljIHBlb3BsZTogbnVtYmVyLFxyXG4gICAgICAgIHB1YmxpYyBzdGF0dXM6IFByb2plY3RTdGF0dXNcclxuICAgICkgeyB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUHJvamVjdCwgUHJvamVjdFN0YXR1cyB9IGZyb20gXCIuLi9Nb2RlbC9wcm9qZWN0XCI7XHJcblxyXG50eXBlIExpc3RlbmVyPFQ+ID0gKGl0ZW1zOiBUW10pID0+IHZvaWRcclxuXHJcbmNsYXNzIFN0YXRlPFQ+IHtcclxuICAgIHByb3RlY3RlZCBsaXN0ZW5lcnM6IExpc3RlbmVyPFQ+W10gPSBbXTtcclxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XHJcbiAgICBhZGRMaXN0ZW5lcihsaXN0ZW5lckZuOiBMaXN0ZW5lcjxUPikge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXJGbik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFByb2plY3QgU3RhdGUgTWFuYWdlbWVudCBTaW5nbGV0b24gQ2xhc3NcclxuZXhwb3J0IGNsYXNzIFByb2plY3RTdGF0ZSBleHRlbmRzIFN0YXRlPFByb2plY3Q+IHtcclxuICAgIHByaXZhdGUgcHJvamVjdHM6IFByb2plY3RbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFByb2plY3RTdGF0ZVxyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBQcm9qZWN0U3RhdGUoKVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlXHJcbiAgICB9XHJcblxyXG4gICAgYWRkUHJvamVjdCh0aXRsZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBwZW9wbGU6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgUHJvamVjdChcclxuICAgICAgICAgICAgTWF0aC5yYW5kb20oKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICB0aXRsZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIHBlb3BsZSxcclxuICAgICAgICAgICAgUHJvamVjdFN0YXR1cy5BQ1RJVkVcclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMucHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxpc3RlbmVycygpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVQcm9qZWN0KHByb2plY3RJZDogc3RyaW5nLCBuZXdTdGF0dXM6IFByb2plY3RTdGF0dXMpIHtcclxuICAgICAgICBjb25zdCBwcm9qZWN0ID0gdGhpcy5wcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PT0gcHJvamVjdElkKTtcclxuICAgICAgICBpZiAocHJvamVjdCAmJiBwcm9qZWN0LnN0YXR1cyAhPT0gbmV3U3RhdHVzKSB7XHJcbiAgICAgICAgICAgIHByb2plY3Quc3RhdHVzID0gbmV3U3RhdHVzO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxpc3RlbmVycygpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgbGlzdGVuZXJGbiBvZiB0aGlzLmxpc3RlbmVycykge1xyXG4gICAgICAgICAgICBsaXN0ZW5lckZuKHRoaXMucHJvamVjdHMuc2xpY2UoKSk7IC8vIG5ldyBjb3B5IG9mIHRoZSBhcnJheVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHByb2plY3RTdGF0ZSA9IFByb2plY3RTdGF0ZS5nZXRJbnN0YW5jZSgpO1xyXG4iLCJcclxuLy8gVkFMSURBVElPTlxyXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRhYmxlIHtcclxuICAgIHZhbHVlOiBzdHJpbmcgfCBudW1iZXI7XHJcbiAgICByZXF1aXJlZD86IGJvb2xlYW47XHJcbiAgICBtYXhMZW5ndGg/OiBudW1iZXI7XHJcbiAgICBtaW5MZW5ndGg/OiBudW1iZXI7XHJcbiAgICBtYXg/OiBudW1iZXI7XHJcbiAgICBtaW4/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZSh2YWxpZGF0YWJsZUlucHV0OiBWYWxpZGF0YWJsZSkge1xyXG4gICAgbGV0IGlzVmFsaWQgPSB0cnVlO1xyXG4gICAgaWYgKHZhbGlkYXRhYmxlSW5wdXQucmVxdWlyZWQpIHtcclxuICAgICAgICBpc1ZhbGlkID0gaXNWYWxpZCAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCAhPT0gMDtcclxuICAgIH1cclxuICAgIGlmICh2YWxpZGF0YWJsZUlucHV0Lm1heExlbmd0aCAhPSBudWxsKSB7XHJcbiAgICAgICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgdmFsaWRhdGFibGVJbnB1dC52YWx1ZS50b1N0cmluZygpLmxlbmd0aCA8PSB2YWxpZGF0YWJsZUlucHV0Lm1heExlbmd0aDtcclxuICAgIH1cclxuICAgIGlmICh2YWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aCAhPSBudWxsKSB7XHJcbiAgICAgICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgdmFsaWRhdGFibGVJbnB1dC52YWx1ZS50b1N0cmluZygpLmxlbmd0aCA+PSB2YWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aDtcclxuICAgIH1cclxuICAgIGlmICh2YWxpZGF0YWJsZUlucHV0Lm1heCAhPSBudWxsKSB7XHJcbiAgICAgICAgaXNWYWxpZCA9IGlzVmFsaWQgJiYgdHlwZW9mIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdudW1iZXInICYmIHZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPD0gdmFsaWRhdGFibGVJbnB1dC5tYXg7XHJcbiAgICB9XHJcbiAgICBpZiAodmFsaWRhdGFibGVJbnB1dC5taW4gIT0gbnVsbCkge1xyXG4gICAgICAgIGlzVmFsaWQgPSBpc1ZhbGlkICYmIHR5cGVvZiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSAnbnVtYmVyJyAmJiB2YWxpZGF0YWJsZUlucHV0LnZhbHVlID49IHZhbGlkYXRhYmxlSW5wdXQubWluO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlzVmFsaWQ7XHJcbn1cclxuXHJcbiIsIi8vIENvbXBvbmVudCBDbGFzcyBcclxuYWJzdHJhY3QgY2xhc3MgQ29tcG9uZW50PFQgZXh0ZW5kcyBIVE1MRWxlbWVudCwgVSBleHRlbmRzIEhUTUxFbGVtZW50PiB7XHJcbiAgICB0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgICBob3N0RWxlbWVudDogVDtcclxuICAgIGVsZW1lbnQ6IFU7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgdGVtcGxhdGVJZDogc3RyaW5nLFxyXG4gICAgICAgIGhvc3RFbGVtZW50SWQ6IHN0cmluZyxcclxuICAgICAgICBpbnNlcnRBdFN0YXJ0OiBib29sZWFuLFxyXG4gICAgICAgIG5ld0VsZW1lbnRJZD86IHN0cmluZ1xyXG4gICAgKSB7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZUlkKSEgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaG9zdEVsZW1lbnRJZCkhIGFzIFQ7XHJcbiAgICAgICAgY29uc3QgaW1wb3J0ZWROb2RlID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0aGlzLnRlbXBsYXRlRWxlbWVudC5jb250ZW50LCB0cnVlKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBpbXBvcnRlZE5vZGUuZmlyc3RFbGVtZW50Q2hpbGQgYXMgVTtcclxuICAgICAgICBpZiAobmV3RWxlbWVudElkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pZCA9IG5ld0VsZW1lbnRJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hdHRhY2goaW5zZXJ0QXRTdGFydCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhdHRhY2goaW5zZXJ0QXRTdGFydDogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KGluc2VydEF0U3RhcnQgPyBcImFmdGVyYmVnaW5cIiA6IFwiYmVmb3JlZW5kXCIsIHRoaXMuZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgYWJzdHJhY3QgY29uZmlndXJlKCk6IHZvaWQ7XHJcbiAgICBhYnN0cmFjdCByZW5kZXJDb250ZW50KCk6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENvbXBvbmVudCIsImltcG9ydCB7IEF1dG9CaW5kIH0gZnJvbSBcIi4uL2RlY29yYXRvcnMvYXV0b2JpbmRcIjtcclxuaW1wb3J0IHsgcHJvamVjdFN0YXRlIH0gZnJvbSBcIi4uL3N0YXRlL3Byb2plY3Qtc3RhdGVcIjtcclxuaW1wb3J0IHsgVmFsaWRhdGFibGUsIHZhbGlkYXRlIH0gZnJvbSBcIi4uL3V0aWxzL3ZhbGlkYXRpb25cIjtcclxuaW1wb3J0ICBDb21wb25lbnQgIGZyb20gXCIuL2Jhc2UtY29tcG9uZW50XCI7XHJcblxyXG4vLyBQcm9qZWN0IElucHV0IENsYXNzXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0SW5wdXQgZXh0ZW5kcyBDb21wb25lbnQ8SFRNTERpdkVsZW1lbnQsIEhUTUxGb3JtRWxlbWVudD4ge1xyXG4gICAgdGl0bGVJbnB1dEVsZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBkZXNjcmlwdGlvbklucHV0RWxlbWVudDogSFRNTFRleHRBcmVhRWxlbWVudDtcclxuICAgIHBlb3BsZUlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigncHJvamVjdC1pbnB1dCcsICdhcHAnLCB0cnVlKTtcclxuICAgICAgICB0aGlzLnRpdGxlSW5wdXRFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aXRsZScpISBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignI2Rlc2NyaXB0aW9uJykhIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignI3Blb3BsZScpISBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY29uZmlndXJlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uZmlndXJlKCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnN1Ym1pdEhhbmRsZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckNvbnRlbnQoKSB7IH1cclxuXHJcbiAgICBAQXV0b0JpbmRcclxuICAgIHByaXZhdGUgc3VibWl0SGFuZGxlcihldmVudDogRXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IHVzZXJJbnB1dCA9IHRoaXMuZ2F0aGVyVXNlcklucHV0KCk7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodXNlcklucHV0KSkge1xyXG4gICAgICAgICAgICBjb25zdCBbdGl0bGUsIGRlc2MsIHBlb3BsZV0gPSB1c2VySW5wdXQ7XHJcbiAgICAgICAgICAgIHByb2plY3RTdGF0ZS5hZGRQcm9qZWN0KHRpdGxlLCBkZXNjLCBwZW9wbGUpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFySW5wdXRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2F0aGVyVXNlcklucHV0KCk6IFtzdHJpbmcsIHN0cmluZywgbnVtYmVyXSB8IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGVudGVyZWRUaXRsZSA9IHRoaXMudGl0bGVJbnB1dEVsZW1lbnQudmFsdWU7XHJcbiAgICAgICAgY29uc3QgZW50ZXJlZERlc2NyaXB0aW9uID0gdGhpcy5kZXNjcmlwdGlvbklucHV0RWxlbWVudC52YWx1ZTtcclxuICAgICAgICBjb25zdCBlbnRlcmVkUGVvcGxlID0gdGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQudmFsdWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHRpdGxlVmFsaWRhdGFibGU6IFZhbGlkYXRhYmxlID0ge1xyXG4gICAgICAgICAgICB2YWx1ZTogZW50ZXJlZFRpdGxlLFxyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgbWluTGVuZ3RoOiAxLFxyXG4gICAgICAgICAgICBtYXhMZW5ndGg6IDE1XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvblZhbGlkYXRhYmxlOiBWYWxpZGF0YWJsZSA9IHtcclxuICAgICAgICAgICAgdmFsdWU6IGVudGVyZWREZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIG1pbkxlbmd0aDogMTAsXHJcbiAgICAgICAgICAgIG1heExlbmd0aDogNTBcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHBlb3BsZVZhbGlkYXRhYmxlOiBWYWxpZGF0YWJsZSA9IHtcclxuICAgICAgICAgICAgdmFsdWU6ICtlbnRlcmVkUGVvcGxlLFxyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICAgICAgbWluOiAxLFxyXG4gICAgICAgICAgICBtYXg6IDEwXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhdmFsaWRhdGUodGl0bGVWYWxpZGF0YWJsZSkgfHxcclxuICAgICAgICAgICAgIXZhbGlkYXRlKGRlc2NyaXB0aW9uVmFsaWRhdGFibGUpIHx8XHJcbiAgICAgICAgICAgICF2YWxpZGF0ZShwZW9wbGVWYWxpZGF0YWJsZSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgYWxlcnQoJ0ludmFsaWQgaW5wdXQsIHBsZWFzZSB0cnkgYWdhaW4hJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtlbnRlcmVkVGl0bGUsIGVudGVyZWREZXNjcmlwdGlvbiwgK2VudGVyZWRQZW9wbGVdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2xlYXJJbnB1dHMoKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZUlucHV0RWxlbWVudC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWUgPSAnJztcclxuICAgICAgICB0aGlzLnBlb3BsZUlucHV0RWxlbWVudC52YWx1ZSA9ICcnO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEF1dG9CaW5kIH0gZnJvbSAnLi4vZGVjb3JhdG9ycy9hdXRvYmluZCc7XHJcbmltcG9ydCB7IERyYWdnYWJsZSB9IGZyb20gJy4uL01vZGVsL2RyYWctYW5kLWRyb3AnO1xyXG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSAnLi4vTW9kZWwvcHJvamVjdCc7XHJcbmltcG9ydCBDb21wb25lbnQgIGZyb20gJy4vYmFzZS1jb21wb25lbnQnO1xyXG5cclxuLy8gUHJvamVjdCBJdGVtIENsYXNzXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0SXRlbSBleHRlbmRzIENvbXBvbmVudDxIVE1MVUxpc3RFbGVtZW50LCBIVE1MTElFbGVtZW50PiBpbXBsZW1lbnRzIERyYWdnYWJsZSB7XHJcbiAgICBwcml2YXRlIHByb2plY3Q6IFByb2plY3Q7XHJcblxyXG4gICAgcHJpdmF0ZSBnZXQgcGVvcGxlQXNzaWduZWRUZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvamVjdC5wZW9wbGUgPiAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLnByb2plY3QucGVvcGxlfSBwZXJzb25zIGFzc2lnbmVkYFxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYDEgcGVyc29uIGFzc2lnbmVkYFxyXG5cclxuICAgIH1cclxuICAgIGNvbnN0cnVjdG9yKGhvc3RJZDogc3RyaW5nLCBwcm9qZWN0OiBQcm9qZWN0KSB7XHJcbiAgICAgICAgc3VwZXIoJ3NpbmdsZS1wcm9qZWN0JywgaG9zdElkLCBmYWxzZSwgcHJvamVjdC5pZCk7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcclxuICAgICAgICB0aGlzLmNvbmZpZ3VyZSgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyQ29udGVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIEBBdXRvQmluZFxyXG4gICAgZHJhZ1N0YXJ0SGFuZGxlcihldmVudDogRHJhZ0V2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyIS5zZXREYXRhKCd0ZXh0L3BsYWluJywgdGhpcy5wcm9qZWN0LmlkKTtcclxuICAgICAgICBldmVudC5kYXRhVHJhbnNmZXIhLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7XHJcbiAgICB9XHJcblxyXG4gICAgQEF1dG9CaW5kXHJcbiAgICBkcmFnRW5kSGFuZGxlcihldmVudDogRHJhZ0V2ZW50KSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJUaGUgZHJhZyBlbmRlZCFcIilcclxuICAgIH1cclxuXHJcbiAgICBjb25maWd1cmUoKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHRoaXMuZHJhZ1N0YXJ0SGFuZGxlcilcclxuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbmRcIiwgdGhpcy5kcmFnRW5kSGFuZGxlcilcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJDb250ZW50KCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdoMicpIS50ZXh0Q29udGVudCA9IHRoaXMucHJvamVjdC50aXRsZTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDMnKSEudGV4dENvbnRlbnQgPSB0aGlzLnBlb3BsZUFzc2lnbmVkVGV4dDtcclxuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigncCcpIS50ZXh0Q29udGVudCA9IHRoaXMucHJvamVjdC5kZXNjcmlwdGlvbjtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBdXRvQmluZCB9IGZyb20gXCIuLi9kZWNvcmF0b3JzL2F1dG9iaW5kXCI7XHJcbmltcG9ydCB7IERyYWdUYXJnZXQgfSBmcm9tIFwiLi4vTW9kZWwvZHJhZy1hbmQtZHJvcFwiO1xyXG5pbXBvcnQgeyBQcm9qZWN0LCBQcm9qZWN0U3RhdHVzIH0gZnJvbSBcIi4uL01vZGVsL3Byb2plY3RcIjtcclxuaW1wb3J0IHsgcHJvamVjdFN0YXRlIH0gZnJvbSBcIi4uL3N0YXRlL3Byb2plY3Qtc3RhdGVcIjtcclxuaW1wb3J0IENvbXBvbmVudCBmcm9tIFwiLi9iYXNlLWNvbXBvbmVudFwiO1xyXG5pbXBvcnQgeyBQcm9qZWN0SXRlbSB9IGZyb20gXCIuL3Byb2plY3QtaXRlbVwiO1xyXG5cclxuLy8gUHJvamVjdCBMaXN0IENsYXNzXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0TGlzdCBleHRlbmRzIENvbXBvbmVudDxIVE1MRGl2RWxlbWVudCwgSFRNTEVsZW1lbnQ+IGltcGxlbWVudHMgRHJhZ1RhcmdldCB7XHJcbiAgICBhc3NpZ25lZFByb2plY3RzOiBQcm9qZWN0W107XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSB0eXBlOiAnYWN0aXZlJyB8ICdmaW5pc2hlZCcpIHtcclxuICAgICAgICBzdXBlcigncHJvamVjdC1saXN0JywgJ2FwcCcsIGZhbHNlLCBgJHt0eXBlfS1wcm9qZWN0c2ApO1xyXG4gICAgICAgIHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IFtdO1xyXG4gICAgICAgIHRoaXMuY29uZmlndXJlKCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJDb250ZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uZmlndXJlKCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpIS5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXJIYW5kbGVyKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSEuYWRkRXZlbnRMaXN0ZW5lcignZHJvcCcsIHRoaXMuZHJvcEhhbmRsZXIpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd1bCcpIS5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLmRyYWdMZWF2ZUhhbmRsZXIpO1xyXG4gICAgICAgIHByb2plY3RTdGF0ZS5hZGRMaXN0ZW5lcigocHJvamVjdHM6IFByb2plY3RbXSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZWxldmFudFByb2plY3RzID0gcHJvamVjdHMuZmlsdGVyKHByaiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAnYWN0aXZlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmouc3RhdHVzID09PSBQcm9qZWN0U3RhdHVzLkFDVElWRTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBwcmouc3RhdHVzID09PSBQcm9qZWN0U3RhdHVzLkZJTklTSEVEO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5hc3NpZ25lZFByb2plY3RzID0gcmVsZXZhbnRQcm9qZWN0cztcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9qZWN0cygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIEBBdXRvQmluZFxyXG4gICAgZHJhZ092ZXJIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBpZiAoZXZlbnQuZGF0YVRyYW5zZmVyICYmIGV2ZW50LmRhdGFUcmFuc2Zlci50eXBlc1swXSA9PT0gJ3RleHQvcGxhaW4nKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIFRvIG92ZXJjb21lIHRoZSBkZWZhdWx0IGJlaGF2aW91ciBvZiBqYXZhU2NyaXB0ICdub3QgdG8gYWxsb3cgZHJvcCdcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhLmNsYXNzTGlzdC5hZGQoJ2Ryb3BwYWJsZScpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBAQXV0b0JpbmRcclxuICAgIGRyb3BIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICBwcm9qZWN0U3RhdGUubW92ZVByb2plY3QoZXZlbnQuZGF0YVRyYW5zZmVyIS5nZXREYXRhKCd0ZXh0L3BsYWluJyksIHRoaXMudHlwZSA9PT0gJ2FjdGl2ZScgPyBQcm9qZWN0U3RhdHVzLkFDVElWRSA6IFByb2plY3RTdGF0dXMuRklOSVNIRUQpXHJcbiAgICB9XHJcblxyXG4gICAgQEF1dG9CaW5kXHJcbiAgICBkcmFnTGVhdmVIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSEuY2xhc3NMaXN0LnJlbW92ZSgnZHJvcHBhYmxlJylcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJDb250ZW50KCkge1xyXG4gICAgICAgIGNvbnN0IGxpc3RJZCA9IGAke3RoaXMudHlwZX0tcHJvamVjdHMtbGlzdGA7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhLmlkID0gbGlzdElkO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdoMicpIS50ZXh0Q29udGVudCA9IGAke3RoaXMudHlwZS50b1VwcGVyQ2FzZSgpfSBQUk9KRUNUU2A7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJQcm9qZWN0cygpIHtcclxuICAgICAgICBjb25zdCBsaXN0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgKSEgYXMgSFRNTFVMaXN0RWxlbWVudDtcclxuICAgICAgICBsaXN0RWwuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgZm9yIChjb25zdCBwcmpJdGVtIG9mIHRoaXMuYXNzaWduZWRQcm9qZWN0cykge1xyXG4gICAgICAgICAgICBuZXcgUHJvamVjdEl0ZW0obGlzdEVsLmlkLCBwcmpJdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFByb2plY3RJbnB1dCB9IGZyb20gXCIuL2NvbXBvbmVudHMvcHJvamVjdC1pbnB1dFwiO1xyXG5pbXBvcnQgeyBQcm9qZWN0TGlzdCB9IGZyb20gXCIuL2NvbXBvbmVudHMvcHJvamVjdC1saXN0XCI7XHJcblxyXG5uZXcgUHJvamVjdElucHV0KCk7XHJcbm5ldyBQcm9qZWN0TGlzdCgnYWN0aXZlJyk7XHJcbm5ldyBQcm9qZWN0TGlzdCgnZmluaXNoZWQnKTtcclxuXHJcblxyXG4iXSwibmFtZXMiOlsiQXV0b0JpbmQiLCJfIiwiXzIiLCJkZXNjcmlwdG9yIiwib3JpZ2luYWxNZXRob2QiLCJ2YWx1ZSIsImNvbmZpZ3VyYWJsZSIsImdldCIsImJpbmQiLCJ0aGlzIiwiUHJvamVjdFN0YXR1cyIsImlkIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInBlb3BsZSIsInN0YXR1cyIsInByb2plY3RTdGF0ZSIsInByb2plY3RzIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsIlByb2plY3RTdGF0ZSIsImFkZFByb2plY3QiLCJuZXdQcm9qZWN0IiwiUHJvamVjdCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsIkFDVElWRSIsInB1c2giLCJ1cGRhdGVMaXN0ZW5lcnMiLCJtb3ZlUHJvamVjdCIsInByb2plY3RJZCIsIm5ld1N0YXR1cyIsInByb2plY3QiLCJmaW5kIiwibGlzdGVuZXJzIiwibGlzdGVuZXJGbiIsInNsaWNlIiwiYWRkTGlzdGVuZXIiLCJ2YWxpZGF0ZSIsInZhbGlkYXRhYmxlSW5wdXQiLCJpc1ZhbGlkIiwicmVxdWlyZWQiLCJ0cmltIiwibGVuZ3RoIiwibWF4TGVuZ3RoIiwibWluTGVuZ3RoIiwibWF4IiwibWluIiwidGVtcGxhdGVJZCIsImhvc3RFbGVtZW50SWQiLCJpbnNlcnRBdFN0YXJ0IiwibmV3RWxlbWVudElkIiwidGVtcGxhdGVFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImhvc3RFbGVtZW50IiwiaW1wb3J0ZWROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRlbnQiLCJlbGVtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJhdHRhY2giLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJ0aXRsZUlucHV0RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkZXNjcmlwdGlvbklucHV0RWxlbWVudCIsInBlb3BsZUlucHV0RWxlbWVudCIsImNvbmZpZ3VyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdWJtaXRIYW5kbGVyIiwicmVuZGVyQ29udGVudCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJ1c2VySW5wdXQiLCJnYXRoZXJVc2VySW5wdXQiLCJBcnJheSIsImlzQXJyYXkiLCJkZXNjIiwiY2xlYXJJbnB1dHMiLCJlbnRlcmVkVGl0bGUiLCJlbnRlcmVkRGVzY3JpcHRpb24iLCJlbnRlcmVkUGVvcGxlIiwiZGVzY3JpcHRpb25WYWxpZGF0YWJsZSIsInBlb3BsZVZhbGlkYXRhYmxlIiwiYWxlcnQiLCJob3N0SWQiLCJkcmFnU3RhcnRIYW5kbGVyIiwiZGF0YVRyYW5zZmVyIiwic2V0RGF0YSIsImVmZmVjdEFsbG93ZWQiLCJkcmFnRW5kSGFuZGxlciIsImNvbnNvbGUiLCJsb2ciLCJ0ZXh0Q29udGVudCIsInBlb3BsZUFzc2lnbmVkVGV4dCIsInR5cGUiLCJhc3NpZ25lZFByb2plY3RzIiwiZHJhZ092ZXJIYW5kbGVyIiwiZHJvcEhhbmRsZXIiLCJkcmFnTGVhdmVIYW5kbGVyIiwicmVsZXZhbnRQcm9qZWN0cyIsImZpbHRlciIsInByaiIsIkZJTklTSEVEIiwicmVuZGVyUHJvamVjdHMiLCJ0eXBlcyIsImNsYXNzTGlzdCIsImFkZCIsImdldERhdGEiLCJyZW1vdmUiLCJsaXN0SWQiLCJ0b1VwcGVyQ2FzZSIsImxpc3RFbCIsImlubmVySFRNTCIsInByakl0ZW0iLCJQcm9qZWN0SXRlbSIsIlByb2plY3RJbnB1dCIsIlByb2plY3RMaXN0Il0sInNvdXJjZVJvb3QiOiIifQ==